<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Boutique RP</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="nav">
    <button onclick="filterSection('mecano')" id="btn-mecano">M√©cano</button>
    <button onclick="filterSection('restaurant')" id="btn-restaurant">Restaurant</button>
    <button onclick="filterSection('bar')" id="btn-bar">Bar</button>
  </div>

  <div class="cart-icon" onclick="goToCart()">
    üõí
    <span id="cart-count">0</span>
  </div>

  <label class="switch">
    <input type="checkbox" id="dark-toggle">
    <span class="slider round"></span>
  </label>

  <div id="notif"
    style="display: none; position: fixed; top: 20px; right: 120px; background: #4caf50; color: white; padding: 10px 20px; border-radius: 8px; z-index: 1000;">
    Produit ajout√© au panier !
  </div>



  <div class="search-container">
    <input type="text" id="search-input" placeholder="Rechercher un produit..." oninput="filterProducts()">
  </div>

  <div class="products" id="product-list">
    <!-- Les produits dynamiques seront inject√©s ici -->
  </div>

  <script>
    const products = {
      mecano: [
        { name: "Trousse de R√©paration", price: 50, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046756.png" },
        { name: "Kit de R√©paration Avanc√©", price: 50, weight: 0.4, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/1046/1046766.png" },
        { name: "Kit de Correctif", price: 50, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046775.png" },
        { name: "Crique de Voiture", price: 50, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/809/809957.png" },
        { name: "Bidon de Carburant", price: 50, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1147/1147930.png" },
        { name: "D√©marreur", price: 50, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/4264/4264749.png" },
        { name: "Kit de R√©paration de Pneus", price: 50, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/590/590673.png" },
        { name: "Radiateur", price: 50, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/590/590690.png" },
        { name: "Pompe √† Carburant", price: 50, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/590/590669.png" },
        { name: "Freins", price: 50, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/590/590675.png" },
        { name: "Transmission", price: 50, weight: 1.0, unit: "kg", img: "images/transmission.png" },
        { name: "Alternateur", price: 50, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/590/590693.png" },
        { name: "Embrayage", price: 50, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/590/590691.png" },
        { name: "Filtre √† Huile", price: 30, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046760.png" },
        { name: "Filtre √† Air", price: 30, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046760.png" },
        { name: "Filtre √† Carburant", price: 30, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046760.png" },
        { name: "Liquide de Refroidissement", price: 30, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046752.png" },
        { name: "Liquide de Freins", price: 30, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046752.png" },
        { name: "Liquide de Direction Assist√©e", price: 30, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046752.png" },
        { name: "Liquide de Transmission", price: 30, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046752.png" },
        { name: "Bougie", price: 30, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046750.png" },
        { name: "Courroie", price: 30, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046750.png" },
        { name: "Volant", price: 30, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046784.png" },
        { name: "Pneu", price: 30, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/590/590688.png" },
        { name: "Porte", price: 20, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046756.png" },
        { name: "Capot", price: 20, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046756.png" },
        { name: "Coffre", price: 20, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046756.png" },
        { name: "Roue", price: 20, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046756.png" },
        { name: "Vitre", price: 20, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046756.png" },
        { name: "Cire", price: 20, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/1046/1046756.png" }
      ],
      restaurant: [
        { name: "Pate √† Pizza", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/1046/1046784.png" },
        { name: "Spaghetti", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/1046/1046760.png" },
        { name: "Emmental", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590663.png" },
        { name: "EDAM", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/1046/1046775.png" },
        { name: "Bleu", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/1046/1046756.png" },
        { name: "Ananas", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/1046/1046766.png" },
        { name: "Jambon Sec", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/877/877951.png" },
        { name: "Artichaut", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/1046/1046752.png" },
        { name: "Sauce Tomate", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/1046/1046750.png" },
        { name: "Feuille de Basilic", price: 5, weight: 0.01, unit: "g", img: "images/bar/feuille_basilic.png" },
        { name: "Anchois", price: 5, weight: 0.2, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590686.png" },
        { name: "Homard", price: 5, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/3075/3075977.png" },
        { name: "Tranche de Pepperoni", price: 5, weight: 1.0, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590690.png" },
        { name: "Tortillas", price: 5, weight: 0.110, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590687.png" },
        { name: "Haricot Noir", price: 5, weight: 0.5, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590685.png" },
        { name: "Feuille de Nori", price: 5, weight: 0.01, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/616/616408.png" },
        { name: "Crevette", price: 5, weight: 0.2, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/135/135763.png" },
        { name: "Sauce Aigre Douce", price: 5, weight: 0.6, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/4264/4264749.png" },
        { name: "Pommes de Terre", price: 5, weight: 0.5, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/4264/4264783.png" },
        { name: "Haricots Vert", price: 5, weight: 0.5, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/135/135646.png" },
        { name: "Nuggets Veggie", price: 5, weight: 0.5, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590673.png" },
        { name: "Riz", price: 5, weight: 0.5, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/4264/4264695.png" },
        { name: "Salade", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/4264/4264743.png" },
        { name: "Sauce Chipotle", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590688.png" },
        { name: "Tranche de Fromage", price: 5, weight: 0.04, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/135/135687.png" },
        { name: "Agave", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/4264/4264725.png" },
        { name: "Caramel", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590685.png" },
        { name: "Vanille", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590695.png" },
        { name: "Feuille de Menthe", price: 5, weight: 0.01, unit: "g", img: "images/bar/feuille_menthe.png" },
        { name: "Lait", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590675.png" },
        { name: "Chili", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/3049/3049401.png" },
        { name: "Ciboulette", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590669.png" },
        { name: "Ma√Øs", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2535/2535521.png" },
        { name: "Feta", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590691.png" },
        { name: "Cannelle", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/184/184514.png" },
        { name: "Pain Burger", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2769/2769276.png" },
        { name: "Farine", price: 5, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/590/590693.png" },
        { name: "Champignon", price: 5, weight: 0.2, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590692.png" },
        { name: "Carotte", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/590/590695.png" },
        { name: "Oeuf", price: 5, weight: 0.06, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/3187/3187909.png" },
        { name: "Piment", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Viande de Poulet", price: 5, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Viande de Poisson", price: 5, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Tomate", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Oignon", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Poivron", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Viande de Boeuf", price: 5, weight: 1.0, unit: "kg", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Avocat", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Citron", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Nouille", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Frites", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Boite en carton", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Gambas", price: 5, weight: 0.2, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Biberon de Sauce BBQ", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Biberon de Sauce Mayo", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Huile D'olive", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Chapelure", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Gobelet", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" },
        { name: "Seau", price: 5, weight: 0.1, unit: "g", img: "https://cdn-icons-png.flaticon.com/512/2707/2707424.png" }
      ],
      bar: [
        { name: "Liqueur de P√®che", price: 5, weight: 1.0, unit: "kg", img: "images/bar/peche.png" },
        { name: "Jus de Pamplemousse", price: 5, weight: 0.5, unit: "g", img: "images/bar/pamplemousse.png" },
        { name: "Jus de Framboise", price: 5, weight: 0.5, unit: "g", img: "images/bar/framboise.png" },
        { name: "Jus de Cranberry", price: 5, weight: 0.5, unit: "g", img: "images/bar/cranberry.png" },
        { name: "Jus d'Abricot", price: 5, weight: 0.5, unit: "g", img: "images/bar/abricot.png" },
        { name: "Jus d'Orange", price: 5, weight: 0.5, unit: "g", img: "images/bar/orange.png" },
        { name: "Jus d'Ananas", price: 5, weight: 0.5, unit: "g", img: "images/bar/ananas.png" },
        { name: "Jus de Citron", price: 5, weight: 0.5, unit: "g", img: "images/bar/citron.png" },
        { name: "Verre √† Cocktail", price: 5, weight: 0.1, unit: "g", img: "images/bar/verre_cocktail.png" },
        { name: "Feuille de Basilic", price: 5, weight: 0.01, unit: "g", img: "images/bar/feuille_basilic.png" },
        { name: "Feuille de Menthe", price: 5, weight: 0.01, unit: "g", img: "images/bar/feuille_menthe.png" },
        { name: "Citron", price: 5, weight: 0.1, unit: "g", img: "images/bar/citron_entier.png" },
        { name: "Mangue", price: 5, weight: 0.1, unit: "g", img: "images/bar/mangue.png" },
        { name: "Banane", price: 5, weight: 0.1, unit: "g", img: "images/bar/banane.png" },
        { name: "Junk Energy Drink", price: 5, weight: 0.5, unit: "g", img: "images/bar/energy_drink.png" },
        { name: "Sirop de Grenadine", price: 5, weight: 1.0, unit: "kg", img: "images/bar/grenadine.png" },
        { name: "Sirop de Sucre de Canne", price: 5, weight: 1.0, unit: "kg", img: "images/bar/sucre_canne.png" },
        { name: "Sucre", price: 5, weight: 0.1, unit: "g", img: "images/bar/sucre.png" },
        { name: "Sucre en Poudre", price: 5, weight: 1.0, unit: "kg", img: "images/bar/Sucre_en_poudre.png" },
        { name: "Pomme", price: 5, weight: 0.1, unit: "g", img: "images/bar/Pomme.png" },
        { name: "Levure", price: 5, weight: 0.1, unit: "g", img: "images/bar/levure.png" }
      ],
    };

    let currentSection = "mecano";

    function getCart() {
      return JSON.parse(localStorage.getItem("cart")) || [];
    }

    function setCart(cart) {
      localStorage.setItem("cart", JSON.stringify(cart));
    }

    function updateCartCount() {
      const cart = getCart();
      const total = cart.reduce((sum, item) => sum + item.quantity, 0);
      const countEl = document.getElementById("cart-count");

      if (total > 0) {
        countEl.style.display = "inline-block";
        countEl.textContent = total;
      } else {
        countEl.style.display = "none";
      }
    }

    function addToCart(name, price, img, weight, unit) {
      let cart = getCart();
      const existing = cart.find(p => p.name === name);
      if (existing) {
        existing.quantity += 1;
      } else {
        cart.push({ name, price, quantity: 1, img, weight, unit });
      }
      setCart(cart);
      updateCartCount();

      // Affichage visuel sans alerte
      const notif = document.getElementById("notif");
      notif.textContent = `${name} ajout√© au panier !`;
      notif.style.display = "block";
      setTimeout(() => {
        notif.style.display = "none";
      }, 2000);
    }

    function filterSection(section) {
      currentSection = section;
      document.querySelectorAll(".nav button").forEach(btn => btn.classList.remove("active"));
      document.getElementById(`btn-${section}`).classList.add("active");
      document.getElementById("search-input").value = "";
      renderProducts(products[section]);
    }

    function renderProducts(list) {
      const container = document.getElementById("product-list");
      container.innerHTML = "";

      list.forEach(product => {
        const safeName = product.name.replace(/'/g, "\\'");
        const safeImg = product.img ? product.img.replace(/'/g, "\\'") : '';

        const div = document.createElement("div");
        div.className = "product";
        div.innerHTML = `
      <h4>${product.name}</h4>
      ${product.img ? `<img src="${product.img}" alt="${product.name}" />` : ''}
      <p>${product.price}$ ‚Äî ${product.weight ? (product.unit === 'g' ? product.weight * 1000 + 'g' : product.weight + 'kg') : "?"}</p>
      <button class="add-btn" onclick="addToCart('${safeName}', ${product.price}, '${safeImg}', ${product.weight || 0}, '${product.unit || ''}')">Ajouter au Panier</button>
`;
        div.style.opacity = 0;
        container.appendChild(div);
        setTimeout(() => div.style.opacity = 1, 50);
      });
    }

    function filterProducts() {
      const search = document.getElementById("search-input").value.toLowerCase();
      const filtered = products[currentSection].filter(product => product.name.toLowerCase().includes(search));
      renderProducts(filtered);
    }

    function goToCart() {
      window.location.href = "panier.html";
    }

    // Initialisation
    document.addEventListener("DOMContentLoaded", () => {
      const urlParams = new URLSearchParams(window.location.search);
      const section = urlParams.get("section") || "mecano";
      filterSection(section);
      updateCartCount();
    });

    document.addEventListener("DOMContentLoaded", () => {
      const toggle = document.getElementById("dark-toggle");

      // Active le dark mode si d√©j√† activ√© pr√©c√©demment
      if (localStorage.getItem("darkMode") === "true") {
        document.body.classList.add("dark-mode");
        toggle.checked = true;
      }

      toggle.addEventListener("change", () => {
        document.body.classList.toggle("dark-mode");
        localStorage.setItem("darkMode", toggle.checked);
      });
    });


  </script>
</body>

</html>